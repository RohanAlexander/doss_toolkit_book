<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 67 forcats and factors | DoSS Toolkit</title>
<meta name="author" content="Ananya, Annie, Haoluan, Isaac, José, Leuven, Mariam, Marija, Matthew, Michael, Rohan, Ruijia, Sam, Shirley, Simone, Uzair, Yena, and Yiqu">
<meta name="description" content="Written by Matthew Wankiewicz and last updated on 7 October 2021.  67.1 Introduction In this lesson, you will learn about: Factors in R, how they work, what they do. The forcats package....">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 67 forcats and factors | DoSS Toolkit">
<meta property="og:type" content="book">
<meta property="og:description" content="Written by Matthew Wankiewicz and last updated on 7 October 2021.  67.1 Introduction In this lesson, you will learn about: Factors in R, how they work, what they do. The forcats package....">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 67 forcats and factors | DoSS Toolkit">
<meta name="twitter:description" content="Written by Matthew Wankiewicz and last updated on 7 October 2021.  67.1 Introduction In this lesson, you will learn about: Factors in R, how they work, what they do. The forcats package....">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="bs4_style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">DoSS Toolkit</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Preface</a></li>
<li class="book-part">Hello World!</li>
<li><a class="" href="introduction.html"><span class="header-section-number">2</span> Introduction</a></li>
<li><a class="" href="getting-and-setting-up-rstudio.html"><span class="header-section-number">3</span> Getting and setting up RStudio</a></li>
<li><a class="" href="getting-to-know-what-is-what.html"><span class="header-section-number">4</span> Getting to know what is what</a></li>
<li><a class="" href="hello-world-1.html"><span class="header-section-number">5</span> Hello World!</a></li>
<li><a class="" href="hello-world-again.html"><span class="header-section-number">6</span> Hello World, again!</a></li>
<li><a class="" href="hello-world-yet-again.html"><span class="header-section-number">7</span> Hello World, yet again!</a></li>
<li><a class="" href="the-r-community.html"><span class="header-section-number">8</span> The R community</a></li>
<li class="book-part">Operating in an error prone world</li>
<li><a class="" href="introduction-7.html"><span class="header-section-number">9</span> Introduction</a></li>
<li><a class="" href="getting-help-is-normal.html"><span class="header-section-number">10</span> Getting help is normal!</a></li>
<li><a class="" href="using-google-and-stack-overflow.html"><span class="header-section-number">11</span> Using Google and Stack Overflow</a></li>
<li><a class="" href="even-more-on-stack-overflow.html"><span class="header-section-number">12</span> Even more on Stack Overflow</a></li>
<li><a class="" href="when-your-code-doesnt-work.html"><span class="header-section-number">13</span> When your code doesn’t work</a></li>
<li><a class="" href="making-reproducible-examples.html"><span class="header-section-number">14</span> Making reproducible examples</a></li>
<li><a class="" href="how-to-make-the-most-of-rs-cryptic-error-messages.html"><span class="header-section-number">15</span> How to make the most of R’s cryptic error messages</a></li>
<li class="book-part">Holding the chaos at bay</li>
<li><a class="" href="introduction-13.html"><span class="header-section-number">16</span> Introduction</a></li>
<li><a class="" href="r-projects-and-working-directory.html"><span class="header-section-number">17</span> R Projects and working directory</a></li>
<li><a class="" href="folder-set-up.html"><span class="header-section-number">18</span> Folder set-up</a></li>
<li><a class="" href="writing-comments.html"><span class="header-section-number">19</span> Writing comments</a></li>
<li><a class="" href="installing-packages.html"><span class="header-section-number">20</span> Installing packages</a></li>
<li><a class="" href="install-from-github.html"><span class="header-section-number">21</span> Install from GitHub</a></li>
<li><a class="" href="calling-packages.html"><span class="header-section-number">22</span> Calling packages</a></li>
<li><a class="" href="how-to-update-packages.html"><span class="header-section-number">23</span> How to update packages</a></li>
<li><a class="" href="read-csvs.html"><span class="header-section-number">24</span> Read CSVs</a></li>
<li><a class="" href="reading-tables-dta-and-other-data-types.html"><span class="header-section-number">25</span> Reading tables dta and other data types</a></li>
<li class="book-part">Hand me my plyrs</li>
<li><a class="" href="introduction-23.html"><span class="header-section-number">26</span> Introduction</a></li>
<li><a class="" href="what-is-the-tidyverse.html"><span class="header-section-number">27</span> What is the tidyverse?</a></li>
<li><a class="" href="the-pipe.html"><span class="header-section-number">28</span> The pipe</a></li>
<li><a class="" href="select.html"><span class="header-section-number">29</span> select</a></li>
<li><a class="" href="filter.html"><span class="header-section-number">30</span> filter</a></li>
<li><a class="" href="group-and-ungroup.html"><span class="header-section-number">31</span> group and ungroup</a></li>
<li><a class="" href="summarise.html"><span class="header-section-number">32</span> summarise</a></li>
<li><a class="" href="arrange.html"><span class="header-section-number">33</span> arrange</a></li>
<li><a class="" href="mutate.html"><span class="header-section-number">34</span> mutate</a></li>
<li><a class="" href="pivoting-data-from-long-to-wide-and-vice-versa.html"><span class="header-section-number">35</span> Pivoting data from long to wide and vice versa</a></li>
<li><a class="" href="rename.html"><span class="header-section-number">36</span> rename</a></li>
<li><a class="" href="counting.html"><span class="header-section-number">37</span> Counting</a></li>
<li><a class="" href="slice.html"><span class="header-section-number">38</span> slice</a></li>
<li><a class="" href="representations-of-data.html"><span class="header-section-number">39</span> Representations of data</a></li>
<li><a class="" href="length-rows-columns-and-dimensions.html"><span class="header-section-number">40</span> length, rows, columns and dimensions</a></li>
<li class="book-part">Totally addicted to base</li>
<li><a class="" href="introduction-37.html"><span class="header-section-number">41</span> Introduction</a></li>
<li><a class="" href="mean-median-sd-lm-and-summary.html"><span class="header-section-number">42</span> mean, median, sd, lm, and summary</a></li>
<li><a class="" href="generalized-linear-models-with-glm.html"><span class="header-section-number">43</span> Generalized linear models with glm</a></li>
<li><a class="" href="mixed-effect-linear-models-with-lme4.html"><span class="header-section-number">44</span> Mixed-effect linear models with lme4</a></li>
<li><a class="" href="function.html"><span class="header-section-number">45</span> function</a></li>
<li><a class="" href="for-and-while.html"><span class="header-section-number">46</span> for and while</a></li>
<li><a class="" href="if-if-else-and-case-when.html"><span class="header-section-number">47</span> if, if else and case when</a></li>
<li><a class="" href="c-seq-seq-along-and-rep.html"><span class="header-section-number">48</span> c, seq, seq along, and rep</a></li>
<li><a class="" href="hist-plot-and-boxplot.html"><span class="header-section-number">49</span> hist, plot and boxplot</a></li>
<li><a class="" href="apply-sapply-and-lapply.html"><span class="header-section-number">50</span> apply, sapply, and lapply</a></li>
<li><a class="" href="file-creation-and-manipulation.html"><span class="header-section-number">51</span> File creation and manipulation</a></li>
<li><a class="" href="sum-round-etc.html"><span class="header-section-number">52</span> sum round etc</a></li>
<li><a class="" href="investigating-and-playing-with-data.html"><span class="header-section-number">53</span> Investigating and playing with data</a></li>
<li><a class="" href="row-and-column-names.html"><span class="header-section-number">54</span> row and column names</a></li>
<li><a class="" href="floor-ceiling-round-and-abs.html"><span class="header-section-number">55</span> floor(), ceiling(), round(), and abs()</a></li>
<li class="book-part">He was a d8er boi</li>
<li><a class="" href="introduction-52.html"><span class="header-section-number">56</span> Introduction</a></li>
<li><a class="" href="head-tail-glimpse-and-summary.html"><span class="header-section-number">57</span> head, tail, glimpse and summary</a></li>
<li><a class="" href="paste-paste0-glue-and-stringr.html"><span class="header-section-number">58</span> paste, paste0, glue and stringr</a></li>
<li><a class="" href="names-rbind-and-cbind.html"><span class="header-section-number">59</span> names, rbind and cbind</a></li>
<li><a class="" href="joins.html"><span class="header-section-number">60</span> Joins</a></li>
<li><a class="" href="looking-for-missing-data.html"><span class="header-section-number">61</span> Looking for missing data</a></li>
<li><a class="" href="setseed-runif-rnorm-and-sample.html"><span class="header-section-number">62</span> setseed, runif, rnorm, and sample</a></li>
<li><a class="" href="simulating-datasets-for-regression.html"><span class="header-section-number">63</span> Simulating datasets for regression</a></li>
<li><a class="" href="conditional-mutating-and-summarising.html"><span class="header-section-number">64</span> Conditional mutating and summarising</a></li>
<li><a class="" href="tidying-up-datasets.html"><span class="header-section-number">65</span> Tidying up datasets</a></li>
<li><a class="" href="pull-pluck-and-unnest.html"><span class="header-section-number">66</span> pull, pluck and unnest</a></li>
<li><a class="active" href="forcats-and-factors.html"><span class="header-section-number">67</span> forcats and factors</a></li>
<li><a class="" href="more-on-strings.html"><span class="header-section-number">68</span> More on strings</a></li>
<li><a class="" href="working-with-dates.html"><span class="header-section-number">69</span> Working with dates</a></li>
<li><a class="" href="regular-expressions.html"><span class="header-section-number">70</span> Regular expressions</a></li>
<li><a class="" href="janitor.html"><span class="header-section-number">71</span> janitor</a></li>
<li class="book-part">To ggplot or not to ggplot</li>
<li><a class="" href="introduction-67.html"><span class="header-section-number">72</span> Introduction</a></li>
<li><a class="" href="overview-of-ggplot2.html"><span class="header-section-number">73</span> Overview of ggplot2</a></li>
<li><a class="" href="histograms.html"><span class="header-section-number">74</span> Histograms</a></li>
<li><a class="" href="scatter-plots.html"><span class="header-section-number">75</span> Scatter plots</a></li>
<li><a class="" href="various-useful-options.html"><span class="header-section-number">76</span> Various useful options</a></li>
<li><a class="" href="saving-graphs.html"><span class="header-section-number">77</span> Saving graphs</a></li>
<li><a class="" href="gganimate.html"><span class="header-section-number">78</span> gganimate</a></li>
<li><a class="" href="some-other-geom.html"><span class="header-section-number">79</span> Some other geom</a></li>
<li><a class="" href="other-geoms-2.html"><span class="header-section-number">80</span> other geoms 2</a></li>
<li><a class="" href="examples-15.html"><span class="header-section-number">81</span> Examples</a></li>
<li><a class="" href="exercises-96.html"><span class="header-section-number">82</span> Exercises</a></li>
<li><a class="" href="exercise-1-20.html"><span class="header-section-number">83</span> Exercise 1</a></li>
<li><a class="" href="exercise-2-17.html"><span class="header-section-number">84</span> Exercise 2</a></li>
<li><a class="" href="exercise-3-10.html"><span class="header-section-number">85</span> Exercise 3</a></li>
<li><a class="" href="exercise-4-5.html"><span class="header-section-number">86</span> Exercise 4</a></li>
<li class="book-part">R Marky Markdown and the Funky Docs</li>
<li><a class="" href="introduction-74.html"><span class="header-section-number">87</span> Introduction</a></li>
<li><a class="" href="introduction-to-r-markdown.html"><span class="header-section-number">88</span> Introduction to R Markdown</a></li>
<li><a class="" href="top-matter-title-date-author-abstract.html"><span class="header-section-number">89</span> Top Matter: Title, Date, Author, Abstract</a></li>
<li><a class="" href="tables-kable-kableextra-and-gt.html"><span class="header-section-number">90</span> Tables: kable, kableextra, and gt</a></li>
<li><a class="" href="multiple-plots-with-patchwork.html"><span class="header-section-number">91</span> Multiple plots with patchwork</a></li>
<li><a class="" href="references-and-bibtex.html"><span class="header-section-number">92</span> References and Bibtex</a></li>
<li><a class="" href="pdf-outputs.html"><span class="header-section-number">93</span> PDF outputs</a></li>
<li><a class="" href="here-and-filepaths.html"><span class="header-section-number">94</span> here and filepaths</a></li>
<li class="book-part">Git outta here</li>
<li><a class="" href="introduction-82.html"><span class="header-section-number">95</span> Introduction</a></li>
<li><a class="" href="what-is-version-control-and-github.html"><span class="header-section-number">96</span> What is version control and GitHub?</a></li>
<li><a class="" href="git-pull-status-add-commit-push.html"><span class="header-section-number">97</span> Git: pull, status, add, commit, push</a></li>
<li><a class="" href="branches-in-github.html"><span class="header-section-number">98</span> Branches in GitHub</a></li>
<li><a class="" href="dealing-with-conflicts.html"><span class="header-section-number">99</span> Dealing with conflicts</a></li>
<li><a class="" href="putting-git-all-together-in-rstudio.html"><span class="header-section-number">100</span> Putting (G)it All together in RStudio</a></li>
<li><a class="" href="projects-issues.html"><span class="header-section-number">101</span> Projects issues</a></li>
<li class="book-part">Indistinguishable from magic</li>
<li><a class="" href="introduction-89.html"><span class="header-section-number">102</span> Introduction</a></li>
<li><a class="" href="iteration.html"><span class="header-section-number">103</span> Iteration</a></li>
<li><a class="" href="coding-style.html"><span class="header-section-number">104</span> Coding style</a></li>
<li><a class="" href="static-maps-using-ggmap.html"><span class="header-section-number">105</span> Static maps using ggmap</a></li>
<li><a class="" href="writing-r-packages.html"><span class="header-section-number">106</span> Writing R Packages</a></li>
<li><a class="" href="writing-r-packages-ii.html"><span class="header-section-number">107</span> Writing R Packages II</a></li>
<li><a class="" href="getting-started-with-blogdown.html"><span class="header-section-number">108</span> Getting started with Blogdown</a></li>
<li><a class="" href="distill-and-postcards.html"><span class="header-section-number">109</span> Distill and postcards</a></li>
<li><a class="" href="getting-started-with-shiny.html"><span class="header-section-number">110</span> Getting started with Shiny</a></li>
<li><a class="" href="tidymodels.html"><span class="header-section-number">111</span> tidymodels</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/RohanAlexander/doss_toolkit_book">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="forcats-and-factors" class="section level1" number="67">
<h1>
<span class="header-section-number">67</span> forcats and factors<a class="anchor" aria-label="anchor" href="#forcats-and-factors"><i class="fas fa-link"></i></a>
</h1>
<p><em>Written by Matthew Wankiewicz and last updated on 7 October 2021.</em></p>
<div id="introduction-63" class="section level2" number="67.1">
<h2>
<span class="header-section-number">67.1</span> Introduction<a class="anchor" aria-label="anchor" href="#introduction-63"><i class="fas fa-link"></i></a>
</h2>
<p>In this lesson, you will learn about:</p>
<ul>
<li>Factors in R, how they work, what they do.</li>
<li>The <code>forcats</code> package.</li>
</ul>
<p>Highlights:</p>
<ul>
<li>Factors are a way of storing data in R. Instead of having many different combinations like a list of names or numbers, factors are usually created to represent a fixed number of values, such as levels (high, low, medium) or times (early, late, on-time). In other words, factors represent categorical data in R.</li>
<li>
<code>forcats</code> contains many functions that allow you to work with factors for plotting or further data analysis.</li>
</ul>
</div>
<div id="the-content-5" class="section level2" number="67.2">
<h2>
<span class="header-section-number">67.2</span> The Content<a class="anchor" aria-label="anchor" href="#the-content-5"><i class="fas fa-link"></i></a>
</h2>
<p>Factors represent categorical variables in R. Factors are stored as integer levels in R, meaning that each level of a factor will be represented by an integer so R knows which one represents the maximum and minimum. Factors can be comprised of both integers and characters but the levels of these factors will be displayed as characters. The <code>factor</code> function can be used to create factors in R, it takes a vector of data and will turn it into a factor. This function can be used on columns in datasets to convert a column of data from numeric/character to a factor.</p>
<p><code>forcats</code> is a package that contains various functions to manipulate factors, it exists as its own package but is also included in the <code>tidyverse</code> package as well. The main goals of these functions are to help reorder and change factor levels, this is done by changing which levels appear at the front/back and also combining levels into other ones.</p>
<p>A helpful cheatsheet for <code>forcats</code> can be found <a href="https://github.com/rstudio/cheatsheets/blob/master/factors.pdf">here.</a></p>
</div>
<div id="factors" class="section level2" number="67.3">
<h2>
<span class="header-section-number">67.3</span> Factors<a class="anchor" aria-label="anchor" href="#factors"><i class="fas fa-link"></i></a>
</h2>
<p>The <code>factor</code> function allows you to take a vector and turn it into a factor. The vector used can be made up of characters or integers. Its main argument is the vector that you want to turn into a factor. An example of this is shown below.</p>
<div class="sourceCode" id="cb449"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">factor_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">factor_vector</span><span class="op">)</span>
<span class="co">#&gt; [1] 1 2 3</span>
<span class="co">#&gt; Levels: 1 2 3</span></code></pre></div>
<p>In addition to the main argument, <code>factor</code> also has some optional arguments. These include <code>levels</code>, <code>labels</code> and <code>exclude</code>. <code>levels</code> tells R what the order of the levels are of your factor (which is highest/lowest), if you leave it empty it will make the levels in alphabetical order or increasing order for integers. <code>labels</code> will create labels for your factor and will set the order of your factor. <code>exclude</code> will take out a level that appears in your factor and replace those values with <code>&lt;NA&gt;</code>.</p>
<p>We can change the levels of our <code>factor_vector</code> from earlier using the <code>levels</code> argument.</p>
<div class="sourceCode" id="cb450"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">factor_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">factor_vector</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">1</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="co">## set levels to 2,1,3</span>
<span class="co">#&gt; [1] 1 2 3</span>
<span class="co">#&gt; Levels: 2 1 3</span></code></pre></div>
<p>Using the <code>labels</code> argument, we can rename the levels of <code>factor_vector</code>. This will rename 1 to ‘one,’ 2 to ‘two’ and 3 to ‘three.’</p>
<div class="sourceCode" id="cb451"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">factor_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">factor_vector</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'one'</span>, <span class="st">'two'</span>, <span class="st">'three'</span><span class="op">)</span><span class="op">)</span> <span class="co">## set labels to 'one', 'two', 'three'</span>
<span class="co">#&gt; [1] one   two   three</span>
<span class="co">#&gt; Levels: one two three</span></code></pre></div>
<p>Using <code>exclude</code> we can exclude the number two from our factor.</p>
<div class="sourceCode" id="cb452"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">factor_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">factor_vector</span>, exclude <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; [1] 1    &lt;NA&gt; 3   </span>
<span class="co">#&gt; Levels: 1 3</span></code></pre></div>
<p>If you want to test if a column or set of data is a factor, you can use <code>is.factor</code>.</p>
<div class="sourceCode" id="cb453"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">factor_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span>
<span class="va">new_factor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">factor_vector</span>, exclude <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/factor.html">is.factor</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">new_factor</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE</span></code></pre></div>
<p>You can also check the levels of a factor using <code>levels</code></p>
<div class="sourceCode" id="cb454"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">factor_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span>
<span class="va">new_factor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">factor_vector</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">new_factor</span><span class="op">)</span>
<span class="co">#&gt; [1] "1" "2" "3"</span></code></pre></div>
</div>
<div id="forcats-1" class="section level2" number="67.4">
<h2>
<span class="header-section-number">67.4</span> Forcats<a class="anchor" aria-label="anchor" href="#forcats-1"><i class="fas fa-link"></i></a>
</h2>
<p>There are many useful functions in the <code>forcats</code> library but this lesson will mainly focus on <code>fct_relevel</code> and <code>fct_reorder</code> while also looking briefly at <code>fct_count</code>, <code>fct_c</code> and <code>fct_lump</code>.</p>
<div id="fct_count" class="section level3" number="67.4.1">
<h3>
<span class="header-section-number">67.4.1</span> <code>fct_count</code><a class="anchor" aria-label="anchor" href="#fct_count"><i class="fas fa-link"></i></a>
</h3>
<p>This function can be used to count the number of values in each level of your factor. It takes one main argument, the factor you want to count. The other optional arguments (<code>sort</code>, <code>prop</code>) sort the most common levels to the top and can compute the proportion of the levels represented.</p>
<div class="sourceCode" id="cb455"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">random_factor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">2</span>,<span class="fl">1</span>,<span class="fl">4</span>,<span class="fl">3</span>,<span class="fl">3</span>,<span class="fl">3</span>,<span class="fl">2</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_count.html">fct_count</a></span><span class="op">(</span><span class="va">random_factor</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 4 × 2</span>
<span class="co">#&gt;   f         n</span>
<span class="co">#&gt;   &lt;fct&gt; &lt;int&gt;</span>
<span class="co">#&gt; 1 1         5</span>
<span class="co">#&gt; 2 2         4</span>
<span class="co">#&gt; 3 3         5</span>
<span class="co">#&gt; 4 4         2</span>

<span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_count.html">fct_count</a></span><span class="op">(</span><span class="va">random_factor</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 4 × 2</span>
<span class="co">#&gt;   f         n</span>
<span class="co">#&gt;   &lt;fct&gt; &lt;int&gt;</span>
<span class="co">#&gt; 1 1         5</span>
<span class="co">#&gt; 2 3         5</span>
<span class="co">#&gt; 3 2         4</span>
<span class="co">#&gt; 4 4         2</span>

<span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_count.html">fct_count</a></span><span class="op">(</span><span class="va">random_factor</span>, sort <span class="op">=</span> <span class="cn">TRUE</span>, prop <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 4 × 3</span>
<span class="co">#&gt;   f         n     p</span>
<span class="co">#&gt;   &lt;fct&gt; &lt;int&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1 1         5 0.312</span>
<span class="co">#&gt; 2 3         5 0.312</span>
<span class="co">#&gt; 3 2         4 0.25 </span>
<span class="co">#&gt; 4 4         2 0.125</span></code></pre></div>
</div>
<div id="fct_c" class="section level3" number="67.4.2">
<h3>
<span class="header-section-number">67.4.2</span> <code>fct_c</code><a class="anchor" aria-label="anchor" href="#fct_c"><i class="fas fa-link"></i></a>
</h3>
<p>This function takes factors with different levels and can combine them into one factor with the levels from the other factors. The only argument it takes are the factors you want to combine. We see that when using it on factors with levels ‘a’ and ‘b’ it will combine them into one factor with levels ‘a’ and ‘b.’</p>
<div class="sourceCode" id="cb456"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">factor_a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"a"</span><span class="op">)</span>
<span class="va">factor_b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"b"</span><span class="op">)</span>

<span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_c.html">fct_c</a></span><span class="op">(</span><span class="va">factor_a</span>, <span class="va">factor_b</span><span class="op">)</span>
<span class="co">#&gt; [1] a b</span>
<span class="co">#&gt; Levels: a b</span></code></pre></div>
</div>
<div id="fct_lump-functions" class="section level3" number="67.4.3">
<h3>
<span class="header-section-number">67.4.3</span> <code>fct_lump</code> functions<a class="anchor" aria-label="anchor" href="#fct_lump-functions"><i class="fas fa-link"></i></a>
</h3>
<p>This group of functions takes levels and brings them together to form a level called “other.” The functions include:</p>
<ul>
<li>
<code>fct_lump_min:</code> This function takes a factor and a number which tells R whether to include the level in other. An optional argument is called <code>other_level</code>, this will change the name of the “other” level.</li>
<li>
<code>fct_lump_prop:</code> This function will lump levels that appear less than a certain proportion of times. For example, you can lump functions that make up less than 15% of your data.</li>
<li>
<code>fct_lump_n:</code> This function lumps all of the levels except the n most frequent ones.</li>
</ul>
<div class="sourceCode" id="cb457"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">random_factor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">2</span>,<span class="fl">1</span>,<span class="fl">4</span>,<span class="fl">3</span>,<span class="fl">3</span>,<span class="fl">3</span>,<span class="fl">2</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump_n</a></span><span class="op">(</span><span class="va">random_factor</span>, n <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="co"># keep the 2 most frequent levels</span>
<span class="co">#&gt;  [1] 1     1     1     Other 3     Other Other 3     Other</span>
<span class="co">#&gt; [10] 1     Other 3     3     3     Other 1     1    </span>
<span class="co">#&gt; Levels: 1 3 Other</span>
<span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump_prop</a></span><span class="op">(</span><span class="va">random_factor</span>, prop <span class="op">=</span> <span class="fl">.25</span><span class="op">)</span> <span class="co"># lump levels which appear less than 25 % of time</span>
<span class="co">#&gt;  [1] 1     1     1     Other 3     Other Other 3     Other</span>
<span class="co">#&gt; [10] 1     Other 3     3     3     Other 1     1    </span>
<span class="co">#&gt; Levels: 1 3 Other</span>
<span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump_min</a></span><span class="op">(</span><span class="va">random_factor</span>, min <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="co"># lump levels which appear less than 3 times</span>
<span class="co">#&gt;  [1] 1     1     1     2     3     Other 2     3     2    </span>
<span class="co">#&gt; [10] 1     Other 3     3     3     2     1     1    </span>
<span class="co">#&gt; Levels: 1 2 3 Other</span></code></pre></div>
</div>
<div id="fct_reorder" class="section level3" number="67.4.4">
<h3>
<span class="header-section-number">67.4.4</span> <code>fct_reorder</code><a class="anchor" aria-label="anchor" href="#fct_reorder"><i class="fas fa-link"></i></a>
</h3>
<p>This function is useful when working with factors because it allows you to reorder a factor you are working with by another variable. For example, you can reorder a factor with levels of different sports by the average height for the sports listed. The first argument for this function is the factor/variable you plan to re-order and the second will be the variable you are sorting the factor by.</p>
<p>Using the <code>expeditions</code> data which looks at Himalayan expeditions, we can reorder the levels of the seasons by the average peak height for each season. As you can see, by adding the <code>mutate</code> line we can change the order of the levels depending on the mean height reached that season.</p>
<div class="sourceCode" id="cb458"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data_ex</span> <span class="op">&lt;-</span> <span class="va">expeditions</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">season</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">highpoint_metres</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span>

<span class="va">data_ex</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">season</span>, y <span class="op">=</span> <span class="va">mean_height</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Plot without fct_reorder"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="067-he_was_a_d8er_boi-forcats_and_factors_files/figure-html/reorder-expedition-1.png" width="672"></div>
<div class="sourceCode" id="cb459"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">data_ex</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>season <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">season</span>, <span class="va">mean_height</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">season</span>, y <span class="op">=</span> <span class="va">mean_height</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Plot with fct_reorder"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="067-he_was_a_d8er_boi-forcats_and_factors_files/figure-html/reorder-expedition-2.png" width="672"></div>
<div class="sourceCode" id="cb460"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">data_sorted</span> <span class="op">&lt;-</span> <span class="va">data_ex</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>season <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">season</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">mean_height</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">data_ex</span><span class="op">$</span><span class="va">season</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "Autumn"  "Spring"  "Summer"  "Unknown" "Winter"</span>
<span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">data_sorted</span><span class="op">$</span><span class="va">season</span><span class="op">)</span>
<span class="co">#&gt; [1] "Spring"  "Autumn"  "Winter"  "Summer"  "Unknown"</span></code></pre></div>
<p>We can see that the original order was alphabetical while the new sorted one is not.</p>
<p><code>fct_reorder</code> can also be used to sort factors in descending order. We will use the same dataset, but this time we will order the levels of seasons decreasing by number of staff hired</p>
<div class="sourceCode" id="cb461"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">crew_group</span> <span class="op">&lt;-</span><span class="va">expeditions</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">season</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_staff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">hired_staff</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span>

<span class="va">crew_group</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">season</span>, y <span class="op">=</span> <span class="va">mean_staff</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Plot without fct_reorder"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="067-he_was_a_d8er_boi-forcats_and_factors_files/figure-html/fct-reorder-desc-1.png" width="672"></div>
<div class="sourceCode" id="cb462"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">crew_group</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>season <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">season</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">mean_staff</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">season</span>, y <span class="op">=</span> <span class="va">mean_staff</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Plot with fct_reorder"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="067-he_was_a_d8er_boi-forcats_and_factors_files/figure-html/fct-reorder-desc-2.png" width="672"></div>
<div class="sourceCode" id="cb463"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">data_sorted</span> <span class="op">&lt;-</span> <span class="va">crew_group</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>season <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">season</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">mean_staff</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">crew_group</span><span class="op">$</span><span class="va">season</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "Autumn"  "Spring"  "Summer"  "Unknown" "Winter"</span>
<span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">data_sorted</span><span class="op">$</span><span class="va">season</span><span class="op">)</span>
<span class="co">#&gt; [1] "Spring"  "Winter"  "Summer"  "Autumn"  "Unknown"</span></code></pre></div>
<p>Once again we see that the order of levels has switched from alphabetical to a different order.</p>
</div>
<div id="fct_relevel" class="section level3" number="67.4.5">
<h3>
<span class="header-section-number">67.4.5</span> <code>fct_relevel</code><a class="anchor" aria-label="anchor" href="#fct_relevel"><i class="fas fa-link"></i></a>
</h3>
<p>This function is used to change the levels of a factor. When R deals with levels in a factor, it sorts the levels of the factor in alphabetical order. This means that if your factor includes temperatures like “hot,” “cold” and “medium,” R will make the levels “cold,” “hot,” “medium.” This can be tricky when classifying the factor because you may want it in increasing temperature or certain order.</p>
<ul>
<li>
<code>fct_relevel</code> takes three arguments: the factor you want to relevel, the new order of the levels and <code>after</code> which tells R where you want the new order to occur (you can set <code>after=Inf</code> to bring your order to the end.)</li>
</ul>
<p>If you have a factor with levels “hot,” “cold” and “medium,” R will sort the levels alphabetically, meaning the order will be “cold,” “hot” and then “medium.” <code>fct_relevel</code> is one way to put the levels in the correct order. There are many ways to change the order, you can either write the order yourself or just move hot to the end using <code>after = Inf</code>.</p>
<div class="sourceCode" id="cb464"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">temperatures</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"hot"</span>, <span class="st">"cold"</span>, <span class="st">"medium"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">temperatures</span><span class="op">)</span>
<span class="co">#&gt; [1] "cold"   "hot"    "medium"</span>

<span class="co"># use fct_relevel</span>

<span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">temperatures</span>, <span class="st">"hot"</span>, after <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span>
<span class="co">#&gt; [1] hot    cold   medium</span>
<span class="co">#&gt; Levels: cold medium hot</span></code></pre></div>
<p>Another example of using <code>fct_relevel</code> is with the expedition data. We can use it to change the levels of the <code>termination_reason</code> to place Successful expeditions at the top of the levels.</p>
<div class="sourceCode" id="cb465"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">termination_levels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">expeditions</span><span class="op">$</span><span class="va">termination_reason</span><span class="op">)</span><span class="op">)</span>
<span class="va">reordered_levels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">termination_levels</span>, <span class="st">"Success (claimed)"</span>, <span class="st">"Success (main peak)"</span>,
            <span class="st">"Success (subpeak)"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">reordered_levels</span><span class="op">)</span>
<span class="co">#&gt;  [1] "Success (claimed)"                                                           </span>
<span class="co">#&gt;  [2] "Success (main peak)"                                                         </span>
<span class="co">#&gt;  [3] "Success (subpeak)"                                                           </span>
<span class="co">#&gt;  [4] "Accident (death or serious injury)"                                          </span>
<span class="co">#&gt;  [5] "Attempt rumoured"                                                            </span>
<span class="co">#&gt;  [6] "Bad conditions (deep snow, avalanching, falling ice, or rock)"               </span>
<span class="co">#&gt;  [7] "Bad weather (storms, high winds)"                                            </span>
<span class="co">#&gt;  [8] "Did not attempt climb"                                                       </span>
<span class="co">#&gt;  [9] "Did not reach base camp"                                                     </span>
<span class="co">#&gt; [10] "Illness, AMS, exhaustion, or frostbite"                                      </span>
<span class="co">#&gt; [11] "Lack (or loss) of supplies or equipment"                                     </span>
<span class="co">#&gt; [12] "Lack of time"                                                                </span>
<span class="co">#&gt; [13] "Other"                                                                       </span>
<span class="co">#&gt; [14] "Route technically too difficult, lack of experience, strength, or motivation"</span>
<span class="co">#&gt; [15] "Unknown"</span></code></pre></div>
<p>Now we have successes at the top.</p>
<p>You can also include a function in <code>fct_relevel</code> to change up the order of your levels. You can use functions like <code>sample</code>, <code>sort</code> or <code>rev</code> to change the order.</p>
<div class="sourceCode" id="cb466"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">termination_levels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">expeditions</span><span class="op">$</span><span class="va">termination_reason</span><span class="op">)</span><span class="op">)</span>
<span class="co"># use sample to make the order of levels randomized</span>

<span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">termination_levels</span>, <span class="va">sample</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;  [1] "Illness, AMS, exhaustion, or frostbite"                                      </span>
<span class="co">#&gt;  [2] "Unknown"                                                                     </span>
<span class="co">#&gt;  [3] "Bad weather (storms, high winds)"                                            </span>
<span class="co">#&gt;  [4] "Success (claimed)"                                                           </span>
<span class="co">#&gt;  [5] "Success (subpeak)"                                                           </span>
<span class="co">#&gt;  [6] "Attempt rumoured"                                                            </span>
<span class="co">#&gt;  [7] "Accident (death or serious injury)"                                          </span>
<span class="co">#&gt;  [8] "Lack (or loss) of supplies or equipment"                                     </span>
<span class="co">#&gt;  [9] "Bad conditions (deep snow, avalanching, falling ice, or rock)"               </span>
<span class="co">#&gt; [10] "Lack of time"                                                                </span>
<span class="co">#&gt; [11] "Other"                                                                       </span>
<span class="co">#&gt; [12] "Success (main peak)"                                                         </span>
<span class="co">#&gt; [13] "Did not reach base camp"                                                     </span>
<span class="co">#&gt; [14] "Did not attempt climb"                                                       </span>
<span class="co">#&gt; [15] "Route technically too difficult, lack of experience, strength, or motivation"</span></code></pre></div>
</div>
</div>
<div id="exercises-79" class="section level2" number="67.5">
<h2>
<span class="header-section-number">67.5</span> Exercises<a class="anchor" aria-label="anchor" href="#exercises-79"><i class="fas fa-link"></i></a>
</h2>
<p>These next exercises will use a dataset which looks at the various countries who have given gifts to the United States, along with the monetary value of these gifts. While the original dataset has almost every country in the world, we will focus on a smaller portion of the countries.</p>
<pre><code>#&gt; Rows: 747
#&gt; Columns: 10
#&gt; $ id               &lt;dbl&gt; 3, 5, 6, 7, 13, 29, 51, 52, 57, 6…
#&gt; $ recipient        &lt;chr&gt; "President", "President", "Presid…
#&gt; $ agency_name      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, N…
#&gt; $ year_received    &lt;dbl&gt; 1999, 1999, 1999, 1999, 1999, 199…
#&gt; $ date_received    &lt;date&gt; NA, NA, NA, NA, NA, NA, NA, NA, …
#&gt; $ donor            &lt;chr&gt; "Sr. Victor Cervera Pacheco, Gove…
#&gt; $ donor_country    &lt;chr&gt; "Mexico", "Spain", "France", "Ita…
#&gt; $ gift_description &lt;chr&gt; "49\" tall wood chair with a blac…
#&gt; $ value_usd        &lt;dbl&gt; 1000, 660, 1200, 1400, 250, 800, …
#&gt; $ justification    &lt;chr&gt; "Non-acceptance would cause embar…</code></pre>
<p>Using <code>fct_reorder</code> change the order of the <code>donor_country</code> levels to be in order of <code>mean_value</code>.</p>
<div class="sourceCode" id="cb468"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gifts_grouped</span> <span class="op">&lt;-</span> <span class="va">gifts</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">donor_country</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">value_usd</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span>
<span class="co">## Enter solution below</span></code></pre></div>
<div class="sourceCode" id="cb469"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gifts_grouped</span> <span class="op">&lt;-</span> <span class="va">gifts</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">donor_country</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">value_usd</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span>
<span class="co">## Enter solution below</span>
<span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">gifts_grouped</span><span class="op">$</span><span class="va">donor_country</span>, <span class="va">gifts_grouped</span><span class="op">$</span><span class="va">mean_value</span><span class="op">)</span>
<span class="co">#&gt; [1] Australia Brazil    Canada    France    Germany  </span>
<span class="co">#&gt; [6] Italy     Mexico    Spain    </span>
<span class="co">#&gt; 8 Levels: Spain Canada Mexico Australia Germany ... Italy</span></code></pre></div>
<p>Now, using <code>fct_reorder</code> change the order of the <code>donor_country</code> levels to be decreasing by <code>mean_value</code>. (Bonus: use the new order to make a plot, steps are very similar to the earlier examples)</p>
<div class="sourceCode" id="cb470"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gifts_grouped</span> <span class="op">&lt;-</span> <span class="va">gifts</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">donor_country</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">value_usd</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span>
<span class="co">## Enter solution below</span></code></pre></div>
<div class="sourceCode" id="cb471"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gifts_grouped</span> <span class="op">&lt;-</span> <span class="va">gifts</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">donor_country</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">value_usd</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span>
<span class="co">## Enter solution below</span>
<span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">gifts_grouped</span><span class="op">$</span><span class="va">donor_country</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">gifts_grouped</span><span class="op">$</span><span class="va">mean_value</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] Australia Brazil    Canada    France    Germany  </span>
<span class="co">#&gt; [6] Italy     Mexico    Spain    </span>
<span class="co">#&gt; 8 Levels: Italy Brazil France Germany Australia ... Spain</span>

<span class="co">## BONUS</span>
<span class="va">gifts_grouped</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>donor_country <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">donor_country</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">mean_value</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">donor_country</span>, <span class="va">mean_value</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="067-he_was_a_d8er_boi-forcats_and_factors_files/figure-html/forcats-test-2-solution-1.png" width="672"></div>
<p>Using <code>fct_relevel</code>, change the order of the levels for <code>gifts$donor_country</code> to be randomly sampled.</p>
<div class="sourceCode" id="cb472"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">gifts</span><span class="op">$</span><span class="va">donor_country</span>, <span class="va">sample</span><span class="op">)</span>
<span class="co">#&gt;   [1] Mexico    Spain     France    Italy     France   </span>
<span class="co">#&gt;   [6] Canada    Mexico    Mexico    Canada    France   </span>
<span class="co">#&gt;  [11] France    Germany   France    France    Italy    </span>
<span class="co">#&gt;  [16] Canada    Italy     Canada    Australia Australia</span>
<span class="co">#&gt;  [21] Mexico    Germany   Italy     Australia Australia</span>
<span class="co">#&gt;  [26] Spain     Italy     Italy     Italy     France   </span>
<span class="co">#&gt;  [31] Mexico    Mexico    Germany   Mexico    Italy    </span>
<span class="co">#&gt;  [36] France    Spain     Italy     Spain     Spain    </span>
<span class="co">#&gt;  [41] France    Mexico    Mexico    Australia Mexico   </span>
<span class="co">#&gt;  [46] Canada    Mexico    Mexico    Germany   Canada   </span>
<span class="co">#&gt;  [51] Canada    Mexico    Italy     Italy     Italy    </span>
<span class="co">#&gt;  [56] Italy     Italy     Italy     Italy     Italy    </span>
<span class="co">#&gt;  [61] Italy     Italy     Canada    Australia France   </span>
<span class="co">#&gt;  [66] Italy     France    Spain     Mexico    Canada   </span>
<span class="co">#&gt;  [71] Canada    Mexico    Canada    Spain     Spain    </span>
<span class="co">#&gt;  [76] Italy     Australia Australia Spain     Spain    </span>
<span class="co">#&gt;  [81] Italy     Italy     Italy     Italy     Mexico   </span>
<span class="co">#&gt;  [86] Italy     Mexico    Mexico    France    Italy    </span>
<span class="co">#&gt;  [91] Italy     Italy     Italy     France    Mexico   </span>
<span class="co">#&gt;  [96] Spain     Germany   Germany   France    Italy    </span>
<span class="co">#&gt; [101] Italy     Canada    Italy     Italy     Mexico   </span>
<span class="co">#&gt; [106] Germany   Italy     Mexico    Italy     Italy    </span>
<span class="co">#&gt; [111] Germany   Italy     France    Mexico    Italy    </span>
<span class="co">#&gt; [116] Australia Italy     Australia France    Italy    </span>
<span class="co">#&gt; [121] Spain     France    Brazil    Italy     Australia</span>
<span class="co">#&gt; [126] Italy     Italy     France    Australia Italy    </span>
<span class="co">#&gt; [131] Italy     Italy     Spain     Australia Australia</span>
<span class="co">#&gt; [136] Italy     France    Italy     Italy     Italy    </span>
<span class="co">#&gt; [141] Italy     Canada    Canada    Canada    Canada   </span>
<span class="co">#&gt; [146] Italy     Canada    Italy     Italy     France   </span>
<span class="co">#&gt; [151] France    Spain     Canada    Italy     Spain    </span>
<span class="co">#&gt; [156] Italy     France    Mexico    Canada    Spain    </span>
<span class="co">#&gt; [161] Mexico    Canada    Italy     Italy     Italy    </span>
<span class="co">#&gt; [166] Italy     Italy     Italy     Italy     France   </span>
<span class="co">#&gt; [171] Italy     Italy     Italy     Italy     Italy    </span>
<span class="co">#&gt; [176] Italy     Italy     France    Mexico    Mexico   </span>
<span class="co">#&gt; [181] Brazil    Canada    France    Italy     Italy    </span>
<span class="co">#&gt; [186] France    Italy     France    Germany   France   </span>
<span class="co">#&gt; [191] Canada    France    France    Canada    Mexico   </span>
<span class="co">#&gt; [196] Germany   Italy     France    Italy     Brazil   </span>
<span class="co">#&gt; [201] Brazil    Italy     Italy     Italy     Italy    </span>
<span class="co">#&gt; [206] Italy     Italy     France    Canada    Italy    </span>
<span class="co">#&gt; [211] Spain     Mexico    Mexico    Italy     Mexico   </span>
<span class="co">#&gt; [216] Italy     Germany   France    Italy     Canada   </span>
<span class="co">#&gt; [221] Germany   Italy     Italy     Australia Italy    </span>
<span class="co">#&gt; [226] Canada    Italy     Germany   Italy     Canada   </span>
<span class="co">#&gt; [231] Mexico    Germany   Australia Australia Canada   </span>
<span class="co">#&gt; [236] Germany   France    Germany   France    Mexico   </span>
<span class="co">#&gt; [241] Italy     Italy     Italy     Mexico    Germany  </span>
<span class="co">#&gt; [246] Germany   Germany   Germany   Italy     Germany  </span>
<span class="co">#&gt; [251] Italy     Australia Germany   Mexico    Mexico   </span>
<span class="co">#&gt; [256] Italy     Italy     France    France    France   </span>
<span class="co">#&gt; [261] Brazil    Australia France    France    France   </span>
<span class="co">#&gt; [266] Italy     Italy     Australia Australia Australia</span>
<span class="co">#&gt; [271] Australia Australia Australia Australia Australia</span>
<span class="co">#&gt; [276] Australia Australia Australia Australia Australia</span>
<span class="co">#&gt; [281] Australia Australia Australia Australia Australia</span>
<span class="co">#&gt; [286] Australia Australia Australia Australia Australia</span>
<span class="co">#&gt; [291] Australia Canada    Italy     Italy     Italy    </span>
<span class="co">#&gt; [296] Mexico    Mexico    Brazil    France    Mexico   </span>
<span class="co">#&gt; [301] Mexico    Mexico    Mexico    Mexico    Mexico   </span>
<span class="co">#&gt; [306] Italy     Italy     Italy     Australia Italy    </span>
<span class="co">#&gt; [311] France    Brazil    Italy     Italy     Italy    </span>
<span class="co">#&gt; [316] Italy     France    France    Australia Australia</span>
<span class="co">#&gt; [321] Australia France    France    France    France   </span>
<span class="co">#&gt; [326] France    Italy     Germany   Mexico    Mexico   </span>
<span class="co">#&gt; [331] France    France    France    France    Italy    </span>
<span class="co">#&gt; [336] Italy     Italy     Australia Germany   Mexico   </span>
<span class="co">#&gt; [341] France    Italy     Italy     France    Canada   </span>
<span class="co">#&gt; [346] Italy     Italy     Italy     Italy     Italy    </span>
<span class="co">#&gt; [351] Italy     Italy     Italy     France    Brazil   </span>
<span class="co">#&gt; [356] Brazil    Brazil    Brazil    Spain     Mexico   </span>
<span class="co">#&gt; [361] Mexico    Mexico    Brazil    Mexico    Mexico   </span>
<span class="co">#&gt; [366] Germany   France    France    Mexico    Italy    </span>
<span class="co">#&gt; [371] Spain     Italy     Mexico    Germany   Brazil   </span>
<span class="co">#&gt; [376] Germany   Germany   Italy     Italy     Mexico   </span>
<span class="co">#&gt; [381] Italy     Italy     France    Spain     France   </span>
<span class="co">#&gt; [386] Germany   Italy     Germany   France    France   </span>
<span class="co">#&gt; [391] Italy     France    Italy     Italy     Australia</span>
<span class="co">#&gt; [396] Italy     Italy     Italy     Italy     Italy    </span>
<span class="co">#&gt; [401] Italy     Italy     Italy     Brazil    Brazil   </span>
<span class="co">#&gt; [406] Germany   Spain     Germany   France    France   </span>
<span class="co">#&gt; [411] Germany   Spain     France    Canada    Canada   </span>
<span class="co">#&gt; [416] Canada    Canada    Germany   Germany   Germany  </span>
<span class="co">#&gt; [421] Australia Brazil    Germany   Canada    Brazil   </span>
<span class="co">#&gt; [426] Brazil    Germany   Brazil    France    France   </span>
<span class="co">#&gt; [431] Germany   Australia Mexico    France    France   </span>
<span class="co">#&gt; [436] France    Mexico    Brazil    France    Spain    </span>
<span class="co">#&gt; [441] France    Germany   France    Italy     Italy    </span>
<span class="co">#&gt; [446] Canada    Canada    Australia Canada    Australia</span>
<span class="co">#&gt; [451] Germany   France    Canada    Mexico    Australia</span>
<span class="co">#&gt; [456] Brazil    Brazil    Brazil    France    Germany  </span>
<span class="co">#&gt; [461] Italy     France    Australia Mexico    France   </span>
<span class="co">#&gt; [466] France    France    France    Mexico    France   </span>
<span class="co">#&gt; [471] Mexico    Brazil    France    Germany   France   </span>
<span class="co">#&gt; [476] Australia France    Brazil    Brazil    Brazil   </span>
<span class="co">#&gt; [481] Germany   Italy     Italy     Italy     Italy    </span>
<span class="co">#&gt; [486] Australia Brazil    Mexico    Mexico    Mexico   </span>
<span class="co">#&gt; [491] Mexico    Italy     Mexico    Mexico    Mexico   </span>
<span class="co">#&gt; [496] Spain     Spain     Italy     Italy     Italy    </span>
<span class="co">#&gt; [501] Mexico    Spain     Italy     Italy     France   </span>
<span class="co">#&gt; [506] Brazil    Canada    Germany   Italy     Canada   </span>
<span class="co">#&gt; [511] Italy     Italy     Italy     Italy     Italy    </span>
<span class="co">#&gt; [516] Canada    Canada    Mexico    Canada    Canada   </span>
<span class="co">#&gt; [521] Spain     Italy     Mexico    Spain     France   </span>
<span class="co">#&gt; [526] Canada    France    Mexico    Spain     Spain    </span>
<span class="co">#&gt; [531] France    Canada    Spain     Italy     Italy    </span>
<span class="co">#&gt; [536] Canada    Canada    Mexico    France    Germany  </span>
<span class="co">#&gt; [541] France    Brazil    Italy     France    Italy    </span>
<span class="co">#&gt; [546] Italy     Italy     Mexico    Mexico    Italy    </span>
<span class="co">#&gt; [551] Canada    Brazil    France    Australia Mexico   </span>
<span class="co">#&gt; [556] Mexico    Germany   Italy     Canada    Mexico   </span>
<span class="co">#&gt; [561] Australia Brazil    Mexico    Canada    Mexico   </span>
<span class="co">#&gt; [566] Mexico    Germany   Mexico    Italy     Spain    </span>
<span class="co">#&gt; [571] Australia Australia Italy     Germany   Germany  </span>
<span class="co">#&gt; [576] Italy     France    Italy     France    France   </span>
<span class="co">#&gt; [581] France    Canada    Italy     Italy     Germany  </span>
<span class="co">#&gt; [586] France    Mexico    Brazil    Mexico    Germany  </span>
<span class="co">#&gt; [591] Germany   Germany   Germany   Germany   Germany  </span>
<span class="co">#&gt; [596] Germany   Germany   Germany   Brazil    Brazil   </span>
<span class="co">#&gt; [601] France    Mexico    France    Mexico    Mexico   </span>
<span class="co">#&gt; [606] Italy     Australia Spain     France    Germany  </span>
<span class="co">#&gt; [611] France    Germany   Mexico    France    Italy    </span>
<span class="co">#&gt; [616] Australia France    Mexico    Italy     France   </span>
<span class="co">#&gt; [621] Australia France    Australia Italy     France   </span>
<span class="co">#&gt; [626] Mexico    Brazil    Spain     Mexico    France   </span>
<span class="co">#&gt; [631] France    Italy     Brazil    Canada    Australia</span>
<span class="co">#&gt; [636] Italy     Canada    France    Australia Canada   </span>
<span class="co">#&gt; [641] Canada    Spain     Germany   Italy     Italy    </span>
<span class="co">#&gt; [646] Mexico    Italy     Germany   Italy     Brazil   </span>
<span class="co">#&gt; [651] Germany   Mexico    Spain     Italy     Germany  </span>
<span class="co">#&gt; [656] Italy     France    Australia Canada    Canada   </span>
<span class="co">#&gt; [661] Italy     France    Spain     Italy     Canada   </span>
<span class="co">#&gt; [666] Italy     Mexico    Mexico    Australia France   </span>
<span class="co">#&gt; [671] Canada    Canada    Canada    France    Mexico   </span>
<span class="co">#&gt; [676] France    Brazil    France    Italy     Brazil   </span>
<span class="co">#&gt; [681] Mexico    Australia Australia Italy     Canada   </span>
<span class="co">#&gt; [686] Germany   Canada    Spain     Spain     Mexico   </span>
<span class="co">#&gt; [691] Italy     Germany   Canada    Canada    Italy    </span>
<span class="co">#&gt; [696] Spain     Brazil    Canada    Mexico    France   </span>
<span class="co">#&gt; [701] Mexico    Germany   Canada    Canada    Canada   </span>
<span class="co">#&gt; [706] Italy     Germany   Germany   France    Australia</span>
<span class="co">#&gt; [711] Italy     Germany   Germany   Canada    Germany  </span>
<span class="co">#&gt; [716] Germany   Germany   Germany   Germany   Germany  </span>
<span class="co">#&gt; [721] Germany   Germany   Germany   France    France   </span>
<span class="co">#&gt; [726] Germany   Mexico    Mexico    Mexico    Mexico   </span>
<span class="co">#&gt; [731] Mexico    France    Spain     Australia France   </span>
<span class="co">#&gt; [736] Canada    Italy     France    Australia France   </span>
<span class="co">#&gt; [741] Germany   Germany   Germany   Germany   Germany  </span>
<span class="co">#&gt; [746] Germany   Spain    </span>
<span class="co">#&gt; 8 Levels: Germany Spain Canada France Brazil ... Mexico</span></code></pre></div>
<p>This final exercise will combine the uses of different <code>forcats</code> functions and will still use the <code>gifts</code> data.
Using one of the <code>fct_lump_</code> functions, lump all but 5 of the <code>donor_country</code> levels into other (save it under <code>gifts_lumped</code>). Next, using <code>fct_relevel</code> change the order to be in a random order (save under <code>gifts_lumped</code> again). Finally, using a <code>forcats</code> function count how many entries are in each level.</p>
<div class="sourceCode" id="cb473"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gifts_lumped</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump_n</a></span><span class="op">(</span><span class="va">gifts</span><span class="op">$</span><span class="va">donor_country</span>, <span class="fl">5</span><span class="op">)</span>
<span class="va">gifts_lumped</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">gifts_lumped</span>, <span class="va">rev</span><span class="op">)</span>
<span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_count.html">fct_count</a></span><span class="op">(</span><span class="va">gifts_lumped</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 × 2</span>
<span class="co">#&gt;   f             n</span>
<span class="co">#&gt;   &lt;fct&gt;     &lt;int&gt;</span>
<span class="co">#&gt; 1 Other       156</span>
<span class="co">#&gt; 2 Mexico      104</span>
<span class="co">#&gt; 3 Italy       199</span>
<span class="co">#&gt; 4 Germany      89</span>
<span class="co">#&gt; 5 France      125</span>
<span class="co">#&gt; 6 Australia    74</span></code></pre></div>
<div class="sourceCode" id="cb474"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">factor_example</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"dog"</span>, <span class="fl">20</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"cat"</span>, <span class="fl">19</span><span class="op">)</span>, 
                    <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"fish"</span>, <span class="fl">12</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"cow"</span>, <span class="fl">9</span><span class="op">)</span>,
                    <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"bird"</span>, <span class="fl">24</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">factor_example</span>, <span class="st">"fish"</span>, <span class="st">"dog"</span><span class="op">)</span> 

<span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump_n</a></span><span class="op">(</span><span class="va">factor_example</span>, <span class="fl">2</span><span class="op">)</span></code></pre></div>
<!-- ```{r forcats-mult-choice-1, echo=F} -->
<!-- question("What is the order of the levels before we run `fct_relevel`?", -->
<!--          answer("dog, cat, fish, cow, bird"), -->
<!--          answer("bird, cat, cow, dog, fish", correct = TRUE), -->
<!--          answer("bird, dog, cat, fish, cow"), -->
<!--          answer("The order is random"), -->
<!--          allow_retry = T) -->
<!-- ``` -->
<!-- ```{r forcats-mult-choice-2, echo=F} -->
<!-- question("After running `fct_relevel` what is the new order of the levels?", -->
<!--          answer("fish, dog, bird, cat, cow", correct = TRUE), -->
<!--          answer("bird, cat, cow, dog, fish"), -->
<!--          answer("fish, dog, other"), -->
<!--          answer("The order is still random"), -->
<!--          allow_retry = T) -->
<!-- ``` -->
<!-- ```{r forcats-mult-choice-3, echo=F} -->
<!-- question("After running `fct_lump_n`, which 2 levels are kept out of other?", -->
<!--          answer("bird", correct = TRUE), -->
<!--          answer("cat"), -->
<!--          answer("cow"), -->
<!--          answer("dog", correct = TRUE), -->
<!--          answer("fish"), -->
<!--          allow_retry = T) -->
<!-- ``` -->
</div>
<div id="common-mistakes-errors-19" class="section level2" number="67.6">
<h2>
<span class="header-section-number">67.6</span> Common Mistakes &amp; Errors<a class="anchor" aria-label="anchor" href="#common-mistakes-errors-19"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>
<code>Error: "f" must be a factor (or character vector).</code>
<ul>
<li>This error will occur if you try to call <code>forcats</code> functions on non-factors. To fix this, ensure you are using a factor.</li>
</ul>
</li>
<li>
<code>argument ".x" is missing, with no default</code>
<ul>
<li>This error will occur if you are missing an argument in your function call. Double check that you have filled out all arguments.</li>
</ul>
</li>
</ul>
</div>
<div id="next-steps-38" class="section level2" number="67.7">
<h2>
<span class="header-section-number">67.7</span> Next Steps<a class="anchor" aria-label="anchor" href="#next-steps-38"><i class="fas fa-link"></i></a>
</h2>
<p>Now that you’re familiar with the <code>forcats</code> package, here are some additional resources to help continue your learning:</p>
<ul>
<li><p>The <code>forcats</code> website which includes more examples and information about the most important functions: <a href="https://forcats.tidyverse.org/" class="uri">https://forcats.tidyverse.org/</a></p></li>
<li><p>R for Data Science’s chapter about factors. This chapter gives another lesson on factors and also uses the <code>forcats</code> package to work with factors: <a href="https://r4ds.had.co.nz/factors.html" class="uri">https://r4ds.had.co.nz/factors.html</a></p></li>
<li><p>The factors chapter from Jenny Bryan’s STAT 545 book: <a href="https://stat545.com/factors-boss.html" class="uri">https://stat545.com/factors-boss.html</a></p></li>
</ul>
</div>
<div id="questions-7" class="section level2" number="67.8">
<h2>
<span class="header-section-number">67.8</span> Questions<a class="anchor" aria-label="anchor" href="#questions-7"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li>True or False, factors are stored as integer levels in R?</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li>True</li>
<li>False</li>
</ol>
<ol start="2" style="list-style-type: decimal">
<li>Which R package has tools to work with factors?</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li><code>dplyr</code></li>
<li><code>forcast</code></li>
<li><code>forcats</code></li>
<li><code>ggplot2</code></li>
</ol>
<ol start="3" style="list-style-type: decimal">
<li>Which function checks if a vector is a factor or not?</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li><code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code></li>
<li><code><a href="https://rdrr.io/r/base/factor.html">is.factor()</a></code></li>
<li><code><a href="https://forcats.tidyverse.org/reference/forcats-package.html">forcats()</a></code></li>
<li><code><a href="https://rdrr.io/r/base/numeric.html">is.numeric()</a></code></li>
</ol>
<ol start="4" style="list-style-type: decimal">
<li>Which function counts the number of values in each level of your factor?</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li><code><a href="https://forcats.tidyverse.org/reference/fct_count.html">fct_count()</a></code></li>
<li><code><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder()</a></code></li>
<li><code><a href="https://forcats.tidyverse.org/reference/fct_c.html">fct_c()</a></code></li>
<li><code><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump()</a></code></li>
</ol>
<ol start="5" style="list-style-type: decimal">
<li>True or False, <code>forcats</code> functions can change how <code>ggplot</code> plots look?</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li>True</li>
<li>False</li>
</ol>
<ol start="6" style="list-style-type: decimal">
<li>Which function will allow me to change the order of my factors for a plot?</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li><code><a href="https://forcats.tidyverse.org/reference/fct_c.html">fct_c()</a></code></li>
<li><code><a href="https://forcats.tidyverse.org/reference/fct_count.html">fct_count()</a></code></li>
<li><code><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump()</a></code></li>
<li><code><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder()</a></code></li>
</ol>
<ol start="7" style="list-style-type: decimal">
<li>What is the cause of the "“f” must be a factor (or character vector)." error?</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li>The function you are calling does not exist</li>
<li>The vector you are using does not exist</li>
<li>The vector you are using is not a factor</li>
<li>The function you are using is incorrect</li>
</ol>
<ol start="8" style="list-style-type: decimal">
<li>Which function lumps levels that appear less than a certain proportion of times?</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li><code><a href="https://forcats.tidyverse.org/reference/fct_count.html">fct_count()</a></code></li>
<li><code><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump_n()</a></code></li>
<li><code><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump_min()</a></code></li>
<li><code><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump_prop()</a></code></li>
</ol>
<ol start="9" style="list-style-type: decimal">
<li>Which function takes factors with different levels and combines them into one factor?</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li><code>fct_c</code></li>
<li><code><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump_n()</a></code></li>
<li><code><a href="https://forcats.tidyverse.org/reference/fct_lump.html">fct_lump_min()</a></code></li>
<li><code><a href="https://forcats.tidyverse.org/reference/fct_count.html">fct_count()</a></code></li>
</ol>
<ol start="10" style="list-style-type: decimal">
<li>True or False, <code>forcats</code> functions can be used with <code>dplyr</code> functions like <code>mutate</code>?</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li>True</li>
<li>False</li>
</ol>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="pull-pluck-and-unnest.html"><span class="header-section-number">66</span> pull, pluck and unnest</a></div>
<div class="next"><a href="more-on-strings.html"><span class="header-section-number">68</span> More on strings</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#forcats-and-factors"><span class="header-section-number">67</span> forcats and factors</a></li>
<li><a class="nav-link" href="#introduction-63"><span class="header-section-number">67.1</span> Introduction</a></li>
<li><a class="nav-link" href="#the-content-5"><span class="header-section-number">67.2</span> The Content</a></li>
<li><a class="nav-link" href="#factors"><span class="header-section-number">67.3</span> Factors</a></li>
<li>
<a class="nav-link" href="#forcats-1"><span class="header-section-number">67.4</span> Forcats</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#fct_count"><span class="header-section-number">67.4.1</span> fct_count</a></li>
<li><a class="nav-link" href="#fct_c"><span class="header-section-number">67.4.2</span> fct_c</a></li>
<li><a class="nav-link" href="#fct_lump-functions"><span class="header-section-number">67.4.3</span> fct_lump functions</a></li>
<li><a class="nav-link" href="#fct_reorder"><span class="header-section-number">67.4.4</span> fct_reorder</a></li>
<li><a class="nav-link" href="#fct_relevel"><span class="header-section-number">67.4.5</span> fct_relevel</a></li>
</ul>
</li>
<li><a class="nav-link" href="#exercises-79"><span class="header-section-number">67.5</span> Exercises</a></li>
<li><a class="nav-link" href="#common-mistakes-errors-19"><span class="header-section-number">67.6</span> Common Mistakes &amp; Errors</a></li>
<li><a class="nav-link" href="#next-steps-38"><span class="header-section-number">67.7</span> Next Steps</a></li>
<li><a class="nav-link" href="#questions-7"><span class="header-section-number">67.8</span> Questions</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/RohanAlexander/doss_toolkit_book/blob/master/067-he_was_a_d8er_boi-forcats_and_factors.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/RohanAlexander/doss_toolkit_book/edit/master/067-he_was_a_d8er_boi-forcats_and_factors.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>DoSS Toolkit</strong>" was written by Ananya, Annie, Haoluan, Isaac, José, Leuven, Mariam, Marija, Matthew, Michael, Rohan, Ruijia, Sam, Shirley, Simone, Uzair, Yena, and Yiqu. It was last built on 2022-02-08.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
